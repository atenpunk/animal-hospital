<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/WEB-INF/templates/template.xhtml">
	<ui:define name="content">
		<h:outputStylesheet>
        
        .rf-dg, .rf-dg-c{
        border:none;
        }
        
        .pbody {
        width: 255px;
        height: 110px;
        }

    </h:outputStylesheet>
		<br />
		<h:form id="mainForm">
			<rich:panel>
				<f:facet name="header">
					<h:outputText style="font-size: 13px;"
						value="#{app_msgs['label.menuShopping.order']}" />
				</f:facet>

				<h:panelGrid columns="2" width="100%">
					<rich:panel style="width:320px;height:110px;">
						<table>
							<tr>
								<td class="detailSellMain"><h:outputText
										style="font-size: 13px;"
										value="#{app_msgs['label.menuShopping.dateTime']}" /></td>
								<td class="detailSellChild"><h:outputText readonly="true"
										maxlength="100" style="font-size: 13px;"
										value="#{productSellController.dateTime}">
										<f:convertDateTime pattern="dd-MM-yyyy" />
									</h:outputText></td>
							</tr>
							<tr>
								<td class="detailSellMain"><h:outputText
										style="font-size: 13px;"
										value="#{app_msgs['label.menuShopping.memberId']}" /></td>
								<td class="detailSellChild"><h:inputText maxlength="100"
										style="font-size: 13px;"
										value="#{productSellController.memberId}">
										<a4j:ajax event="keyup" render="inputMemberNameId"
											listener="#{productSellController.onKeypress()}" />
									</h:inputText></td>
							</tr>
							<tr>
								<td class="detailSellMain"><h:outputText
										style="font-size: 13px;"
										value="#{app_msgs['label.menuShopping.memberName']}" /></td>
								<td class="detailSellChild"><h:outputText
										id="inputMemberNameId" maxlength="100" readonly="true"
										style="font-size: 13px;"
										value="#{productSellController.memberName}" /></td>
							</tr>
						</table>
					</rich:panel>
				</h:panelGrid>
				<h:panelGrid columns="3">
					<a4j:commandButton id="saveSell"
						disabled="#{productSellController.productSellModelList.size() eq 0}"
						value="#{app_msgs['button.save']}"
						onclick="if (!confirm('#{app_msgs['label.sellPage.save']}')) return false"
						action="#{productSellController.saveOrder}"
						render="testDataTable,messageId,saveSell"
						style="font-size: 12px; width : 80px;"></a4j:commandButton>

					<a4j:commandButton id="cancleSell"
						value="#{app_msgs['button.cancle']}"
						action="#{productSellController.cancleOrder}"
						render="testDataTable,messageId,saveSell"
						style="font-size: 12px; width : 80px;"></a4j:commandButton>

					<h:panelGrid id="messageId">
						<div style="text-align: left">
							<h:messages style="font-size: 13px;" globalOnly="true"
								infoClass="info" warnClass="warn" errorClass="error" />
						</div>
					</h:panelGrid>
				</h:panelGrid>

				<rich:dataTable id="testDataTable" style="width : 100%;"
					rowKeyVar="row"
					onrowmouseover="this.style.backgroundColor='#F1F1F1'"
					onrowmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
					value="#{productSellController.productSellModelList}"
					var="itemSell">
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column breakRowBefore="true">
								<h:outputText style="font-size: 13px;" value="" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.order']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.productCode']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.detailProduct']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.price']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.pv']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.qty']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.totalPrice']}" />
							</rich:column>
							<rich:column>
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.totalPv']}" />
							</rich:column>
						</rich:columnGroup>
					</f:facet>
					<rich:column style="text-align:center">
						<a4j:commandLink value=""
							action="#{productSellController.deleteOrder(itemSell)}"
							render="testDataTable,saveSell">
							<h:graphicImage value="/resources/image/delete_icon.png"
								width="20px" height="20px" />
						</a4j:commandLink>
					</rich:column>
					<rich:column style="text-align:center">
						<h:outputText style="font-size: 13px;" value="#{row+1}">
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:left">
						<h:outputText style="font-size: 13px;"
							value="#{itemSell.productCode}">
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:left">
						<h:outputText style="font-size: 13px;"
							value="#{itemSell.productThDesc}">
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:right">
						<h:outputText style="font-size: 13px;" value="#{itemSell.price}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:right">
						<h:outputText style="font-size: 13px;" value="#{itemSell.pv}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:right;">
						<h:outputText style="font-size: 13px;" value="#{itemSell.qty}">
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:right">
						<h:outputText style="font-size: 13px;"
							value="#{itemSell.totalPrice}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
					</rich:column>
					<rich:column style="text-align:right">
						<h:outputText style="font-size: 13px;" value="#{itemSell.totalPv}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
					</rich:column>
					<f:facet name="footer">

						<rich:columnGroup
							rendered="#{productSellController.productSellModelList.size() ne 0}">
							<rich:column colspan="7" style="text-align:right">
								<h:outputText style="font-size: 13px;"
									value="#{app_msgs['label.menuSell.total']}" />
							</rich:column>
							<rich:column style="text-align:right">
								<h:outputText style="font-size: 13px;"
									value="#{productSellController.totalPrice}">
									<f:convertNumber pattern="#,##0" />
								</h:outputText>
							</rich:column>
							<rich:column style="text-align:right">
								<h:outputText style="font-size: 13px;"
									value="#{productSellController.totalPv}">
									<f:convertNumber pattern="#,##0" />
								</h:outputText>
							</rich:column>

						</rich:columnGroup>
					</f:facet>
				</rich:dataTable>
				<br />
				<h:outputText style="font-size: 13px;"
					value="#{app_msgs['label.menuSell.category']}" />&#160;&#160;
				<h:selectOneMenu value="#{productSellController.selectedCatalog}"
					style=" width : 150px;" id="dropDownCategory">
					<a4j:ajax event="change"
						listener="#{productSellController.onChangeCatalog}"
						render="productListId" />
					<f:selectItems value="#{productSellController.catalogModelList}"
						var="item" itemLabel="#{item.thLabel}" itemValue="#{item.intKey}">
					</f:selectItems>
				</h:selectOneMenu>
				<br />
				<br />
				<rich:panel style="overflow-y: scroll; height:430px;">
					<rich:dataGrid value="#{productSellController.productModelList}"
						rowKeyVar="row" id="productListId" var="itemProduct" columns="3"
						width="100%" border="0">
						<rich:panel bodyClass="pbody">

							<table>
								<tr>
									<td rowspan="4"><a4j:mediaOutput element="img"
											mimeType="image/jpeg" id="mediaId" session="false"
											rendered="#{itemProduct.image ne null}"
											createContent="#{productSellController.paintImg}"
											value="#{row}" style="width:95px; height:100px;"
											cacheable="false">
											<f:param value="#{productSellController.timeStamp}"
												name="time" />
										</a4j:mediaOutput> <h:graphicImage rendered="#{itemProduct.image eq null}"
											value="/resources/image/noImg.gif" width="95px"
											height="100px" /></td>
									<td colspan="2" class="tablePageSellMain"><h:outputText
											value="#{itemProduct.productThDesc}"></h:outputText></td>
								</tr>
								<tr>
									<td class="tablePageSellChild2"><h:outputText
											value="#{app_msgs['label.menuSell.price']}"></h:outputText></td>
									<td class="tableChildPageSell"><h:outputText
											value="#{itemProduct.price}">
											<f:convertNumber pattern="#,##0" />
										</h:outputText></td>
								</tr>
								<tr>
									<td class="tablePageSellChild2"><h:outputText
											value="#{app_msgs['label.menuSell.pv']}"></h:outputText></td>
									<td class="tableChildPageSell"><h:outputText
											value="#{itemProduct.pv}">
											<f:convertNumber pattern="#,##0" />
										</h:outputText></td>
								</tr>
								<tr>
									<td colspan="2"><a4j:commandButton id="addCartId"
											value="#{app_msgs['button.addCart']}"
											action="#{productSellController.addCart(itemProduct)}"
											render="testDataTable,saveSell,messageId"
											style="font-size: 12px; width : 100%;"></a4j:commandButton></td>
								</tr>
							</table>

						</rich:panel>
					</rich:dataGrid>
				</rich:panel>

			</rich:panel>
		</h:form>
	</ui:define>

</ui:composition>
